# الميزات العربية في لغة باء

## نظرة عامة

تقدم لغة باء دعماً شاملاً للبرمجة باللغة العربية من خلال:

- دعم كامل لترميز UTF-8 لملفات المصدر
- معالجة النص من اليمين إلى اليسار (RTL) في الأدوات والتوثيق
- معرفات وكلمات مفتاحية عربية
- رسائل خطأ ثنائية اللغة
- توثيق عربي شامل

## ميزات اللغة

### 1. الكلمات المفتاحية العربية

| العربية | الإنجليزية | الوصف |
| ------- | ----------- | ------ |
| `إذا` | `if` | جملة شرطية |
| `وإلا` | `else` | فرع بديل |
| `طالما` | `while` | حلقة while |
| `لكل` | `for` | حلقة for (نمط C: init; condition; increment) |
| `افعل` | `do` | حلقة do-while |
| `اختر` | `switch` | جملة switch |
| `حالة` | `case` | تسمية case |
| `توقف` | `break` | جملة break |
| `استمر` | `continue` | جملة continue |
| `إرجع` | `return` | جملة return |
| `بنية` | `struct` | تعريف بنية |
| `ثابت` | `const` | كلمة مفتاحية ثابت |
| `اتحاد` | `union` | تعريف اتحاد |
| `مستقر` | `static` | مدة تخزين ساكنة / ربط داخلي |
| `خارجي` | `extern` | ربط خارجي |
| `مضمن` | `inline` | تلميح دالة مضمنة (C99) |
| `مقيد` | `restrict` | تلميح تحسين مؤشر (C99) |
| `نوع_مستخدم` | `typedef` | تعريف اسم مستعار للنوع |
| `حجم` | `sizeof` | عملية حجم النوع/الكائن |
| `متطاير` | `volatile` | مؤهل وصول الذاكرة المتطاير (C99) |
| `تعداد` | `enum` | تعريف نوع التعداد |

### 2. الأنواع

| العربية | الإنجليزية | الوصف | الحجم |
| ------- | ----------- | ------ | ----- |
| `عدد_صحيح` | `int` | عدد صحيح | 32-بت |
| `عدد_حقيقي` | `float` | عدد عشري | 32-بت |
| `عدد_صحيح_طويل_جدا` | `long long int` | عدد صحيح طويل جداً موقع | 64-بت |
| `حرف` | `char` | حرف (UTF-16LE `wchar_t`) | 16-بت |
| `فراغ` | `void` | لا نوع | - |
| `منطقي` | `bool` | منطقي | 8-بت |
| `مصفوفة` | array | نوع مصفوفة | - |
| `مؤشر` | pointer | نوع مؤشر | - |
| `بنية` | struct | نوع بنية | - |
| `اتحاد` | union | نوع اتحاد | - |
| `تعداد` | enum | نوع تعداد | - |

### 3. العمليات

| الفئة | العربية | الرمز | الوصف |
| ----- | ------- | ----- | ------ |
| حسابية | جمع | `+` | جمع |
| | طرح | `-` | طرح |
| | ضرب | `*` | ضرب |
| | قسمة | `/` | قسمة |
| | باقي | `%` | باقي القسمة |
| | زيادة | `++` | زيادة |
| | إنقاص | `--` | إنقاص |
| مركبة | جمع_وتعيين | `+=` | جمع وتعيين |
| | طرح_وتعيين | `-=` | طرح وتعيين |
| | ضرب_وتعيين | `*=` | ضرب وتعيين |
| | قسمة_وتعيين | `/=` | قسمة وتعيين |
| | باقي_وتعيين | `%=` | باقي القسمة وتعيين |
| مقارنة | يساوي | `==` | يساوي |
| | لا_يساوي | `!=` | لا يساوي |
| | أكبر_من | `>` | أكبر من |
| | أصغر_من | `<` | أصغر من |
| | أكبر_أو_يساوي | `>=` | أكبر من أو يساوي |
| | أصغر_أو_يساوي | `<=` | أصغر من أو يساوي |
| منطقية | و | `&&` | و منطقي |
| | أو | `\|\|` | أو منطقي |
| | ليس | `!` | ليس منطقي |
| وصول عضو | وصول_مباشر | `::` | وصول عضو مباشر |
| | وصول_مؤشر | `->` | وصول عضو مؤشر |

### 4. القيم المنطقية

| العربية | الإنجليزية | الوصف |
| ------- | ----------- | ------ |
| `صحيح` | `true` | قيمة منطقية صحيحة |
| `خطأ` | `false` | قيمة منطقية خاطئة |

### 5. توجيهات المعالج المسبق

تستخدم باء كلمات مفتاحية عربية لتوجيهات المعالج المسبق، متوافقة مع وظائف C99:

| توجيه باء | مكافئ C99 | الوصف |
| --------- | --------- | ------ |
| `#تضمين` | `#include` | يتضمن ملف مصدري آخر. |
| `#تعريف` | `#define` | يعرف ماكرو. يدعم الماكروات الشبيهة بالكائن والشبيهة بالدالة. |
| `وسائط_إضافية` (في التعريف) | `...` (في التعريف) | يشير إلى معاملات متغيرة في تعريف ماكرو شبيه بالدالة. |
| `__وسائط_متغيرة__` (في الجسم) | `__VA_ARGS__` (في الجسم) | يصل إلى المعاملات المتغيرة داخل توسع ماكرو. |
| `#الغاء_تعريف` | `#undef` | يزيل تعريف ماكرو. |
| `#إذا` | `#if` | تجميع شرطي بناءً على تعبير. يستخدم `معرف` لـ `defined`. |
| `#إذا_عرف` | `#ifdef` | تجميع شرطي إذا كان الماكرو معرف. (يستخدم `معرف`) |
| `#إذا_لم_يعرف` | `#ifndef` | تجميع شرطي إذا لم يكن الماكرو معرف. (يستخدم `!معرف`) |
| `#وإلا_إذا` | `#elif` | شرط else-if للتجميع الشرطي. |
| `#إلا` | `#else` | فرع بديل للتجميع الشرطي. |
| `#نهاية_إذا` | `#endif` | ينهي كتلة تجميع شرطي. |
| `#خطأ` | `#error` | يبلغ عن خطأ قاتل أثناء المعالجة المسبقة. |
| `#تحذير` | `#warning` | يبلغ عن رسالة تحذير أثناء المعالجة المسبقة. |
| `#سطر` | `#line` | يعدل رقم السطر المبلغ عنه واسم الملف. |
| `#براغما` | `#pragma` | توجيهات محددة التنفيذ. |
| `أمر_براغما("...")` | `_Pragma("...")` | عملية لتوليد توجيه pragma من سلسلة نصية حرفية. |

**الماكروات المعرفة مسبقاً:**

| ماكرو باء معرف مسبقاً | مكافئ C99 | الوصف |
| -------------------- | --------- | ------ |
| `__الملف__` | `__FILE__` | يتوسع إلى اسم الملف المصدري الحالي كسلسلة نصية حرفية. |
| `__السطر__` | `__LINE__` | يتوسع إلى رقم السطر الحالي كثابت عدد صحيح. |
| `__التاريخ__` | `__DATE__` | يتوسع إلى تاريخ التجميع كسلسلة نصية حرفية (مثل "May 10 2025"). |
| `__الوقت__` | `__TIME__` | يتوسع إلى وقت التجميع كسلسلة نصية حرفية (مثل "02:00:00"). |
| `__الدالة__` | `__func__` | يتوسع إلى `L"__BAA_FUNCTION_PLACEHOLDER__"` في المعالج المسبق. القيمة النهائية بواسطة مراحل لاحقة. |
| `__إصدار_المعيار_باء__` | `__STDC_VERSION__` (مفاهيمياً) | يتوسع إلى long int (مثل `10210L`) يمثل إصدار لغة باء. |

### 6. القيم الحرفية العددية

تدعم باء العربية في القيم الحرفية العددية بشكل واسع:

- **الأرقام العربية-الهندية:** الأرقام `٠` إلى `٩` (U+0660-U+0669) يمكن استخدامها أينما تُستخدم الأرقام الغربية (`0`-`9`)، للأعداد الصحيحة والعشرية. المحلل اللفظي يلتقط هذه الأرقام الخام كجزء من معجم الرمز.
  - أمثلة: `عدد_صحيح س = ١٢٣.` (s = 123), `عدد_حقيقي ص = ٣٫١٤.` (p = 3.14 باستخدام فاصل عشري عربي)
- **الفاصل العشري العربي:** الحرف `٫` (U+066B) معترف به كفاصل عشري في الأعداد العشرية، بالإضافة إلى النقطة (`.`). المحلل اللفظي يلتقط هذا الحرف الخام.
  - مثال: `عدد_حقيقي pi = ٣٫١٤١٥٩.`
- **الترميز العلمي:** يستخدم `أ` (ALIF WITH HAMZA ABOVE, U+0623) كعلامة أس (مثل `1.23أ4` لـ `1.23 * 10^4`). `e`/`E` الإنجليزية غير مدعومة.
  - أمثلة: `1.23أ4`, `١٠أ-٢`, `٠٫٥أ+٣`
- **الشرطات السفلية مع الأرقام العربية:** الشرطات السفلية يمكن استخدامها كفواصل للقراءة مع الأرقام العربية-الهندية أيضاً.
  - مثال: `عدد_صحيح كبير = ١_٠٠٠_٠٠٠.` (مليون واحد)
- **لواحق القيم الحرفية:** باء تستخدم لواحق عربية لتحديد أنواع القيم الحرفية.
  - **لواحق الأعداد الصحيحة:** `غ` (unsigned), `ط` (long), `طط` (long long), والتركيبات (مثل `غط`, `ططغ`).
    - أمثلة: `123غ`, `٤٥٦ط`, `0x10ططغ`
  - **لاحقة العدد العشري:** `ح` (float, مثل `3.14ح`, `١٫٠أ٢ح`).

### 7. القيم الحرفية للحروف والسلاسل النصية

القيم الحرفية للحروف محاطة بعلامات اقتباس مفردة (`'ح'`). القيم الحرفية للسلاسل النصية محاطة بعلامات اقتباس مزدوجة (`"نص"`).
باء تستخدم الشرطة المائلة العكسية (`\`) كحرف هروب، متبوعة **بحرف أو تسلسل هروب عربي مخصص لباء.**
*تسلسلات الهروب القديمة على نمط C (مثل `\n`, `\t`) و `\uXXXX` / `\xHH` **غير** مدعومة وستعامل كأخطاء.*

**تسلسلات الهروب العربية (النحو العربي فقط):**

| هروب | الحرف الممثل | Unicode (إن أمكن) | ملاحظات |
| ----- | ------------ | ------------------ | -------- |
| `\س` | سطر جديد | `L'\n'` (U+000A) | (سين) |
| `\م` | تاب | `L'\t'` (U+0009) | (ميم) |
| `\ر` | إرجاع العربة | `L'\r'` (U+000D) | (راء) |
| `\ص` | حرف فارغ | `L'\0'` (U+0000) | (صاد) |
| `\\` | شرطة مائلة عكسية `\` | `L'\\'` (U+005C) | (قياسي، محفوظ لهروب نفسه) |
| `\'` | اقتباس مفرد `'` | `L'\''` (U+0027) | (قياسي، للقيم الحرفية للحروف) |
| `\"` | اقتباس مزدوج `"` | `L'"'` (U+0022) | (قياسي، للقيم الحرفية النصية) |
| `\يXXXX` | حرف Unicode U+XXXX |  | (ياء) XXXX أربعة أرقام سادس عشري. |
| `\هـHH` | قيمة بايت 0xHH |  | (هاء، تطويل) HH رقمان سادس عشري. القيمة 0-255. |

```baa
حرف سطر_جديد = '\س'.
حرف علامة_جدولة = '\م'.
نص مثال = "هذا نص يتضمن \سسطر جديد و \متاب."
حرف همزة_علوية = '\ي0623'. // يمثل 'أ'
حرف قيمة_بايت = '\هـ41'. // يمثل ASCII 'A'
```

- **السلاسل متعددة الأسطر:** تسلسلات حروف محاطة بثلاث علامات اقتباس مزدوجة (`"""`). الأسطر الجديدة داخل السلسلة محفوظة. تسلسلات الهروب العربية معالجة.

    ```baa
    حرف نص_متعدد = """سطر أول\سسطر ثاني مع \م تاب.""".
    ```

- **القيم الحرفية للسلاسل الخام:** مبدوءة بـ `خ` (خاء). لا تعالج تسلسلات الهروب.

    ```baa
    حرف مسار = خ"C:\مسارات\ملف.txt". // \م حرفي هنا
    حرف خام_متعدد = خ"""هذا \س نص خام. الهروب \م لا يعمل.""".
    ```

### 8. معاملات الدالة

| الميزة | الوصف | الحالة |
| ------ | ------ | ----- |
| المعاملات الاختيارية | معاملات بقيم افتراضية | مخطط |
| معاملات الراحة | عدد متغير من المعاملات | مخطط |
| المعاملات المسماة | معاملات محددة بالاسم | مخطط |

## أمثلة برمجية

### 1. مرحباً بالعالم

```baa
// باء تستخدم إعلانات دوال على نمط C، مثل:
// عدد_صحيح رئيسية() { ... }
// فراغ رئيسية() { ... }
عدد_صحيح رئيسية() {
    اطبع("مرحباً بالعالم!").
    إرجع 0.
}
```

### 2. دالة مع معاملات

```baa
عدد_صحيح جمع_الأرقام(عدد_صحيح أ، عدد_صحيح ب) {
    إرجع أ + ب.
}
```

### 3. جملة شرطية

```baa
إذا (عمر >= 18) {
    اطبع("بالغ").
} وإلا {
    اطبع("قاصر").
}
```

### 4. مثال حلقة

```baa
عدد_صحيح مجموع = 0.
لكل (عدد_صحيح i = 1; i <= 10; i++) {
    مجموع += i.
}
```

## دعم الملفات

### 1. امتدادات الملفات

- `.ب` - امتداد ملف المصدر العربي الأساسي
- `.baa` - امتداد ملف مصدري بديل

### 2. ترميز الملفات

- ملفات المصدر متوقعة بـ UTF-8 أو UTF-16LE (BOM موصى به لـ UTF-16LE).
- المعالج المسبق يكتشف هذه تلقائياً ويحول إلى تدفق UTF-16LE داخلي للمحلل اللفظي.
- دعم كامل للحروف العربية في التعليقات والسلاسل النصية والمعرفات.

## رسائل الخطأ

يهدف المترجم إلى توفير رسائل خطأ بالعربية والإنجليزية.

```
خطأ: متغير غير معرف 'س'
Error: Undefined variable 's'

خطأ: نوع غير متوافق في التعيين
Error: Incompatible type in assignment
```

## أدوات التطوير

### 1. دعم المحرر (مخطط)

- رسم نص RTL.
- تمييز نحو عربي.
- إكمال تلقائي للكلمات المفتاحية العربية.
- رسائل خطأ بالعربية.

### 2. التصحيح (مخطط)

- أسماء متغيرات عربية في المصحح.
- مكدس استدعاءات عربي.
- تعبيرات مراقبة عربية.

## أفضل الممارسات

### 1. اصطلاحات التسمية

- استخدم أسماء عربية ذات معنى.
- اتبع قواعد النحو العربي حيث أمكن للوضوح.
- كن متسقاً مع نمط التسمية (مثل `اسم_متغير_طويل` أو `اسم متغير طويل` إذا كان مدعوماً).
- استخدم الشرطات السفلية للأسماء المركبة إذا فُضل: `الاسم_الاول`.

### 2. نمط الكود

- حافظ على اتجاه نص متسق (خاصة في المحررات التي تدعم RTL/LTR مختلط).
- استخدم تعليقات عربية واضحة.
- اتبع مسافة بادئة قياسية.
- اجمع الإعلانات ذات الصلة.

## التحسينات المستقبلية

1. دعم RTL محسن في المحررات وإخراج الأدوات.
2. المزيد من دوال المكتبة القياسية العربية.
3. أدوات مولد التوثيق العربي.
4. رسائل خطأ محسنة ومترجمة بالكامل.
5. أدوات تنسيق كود عربي.

## دعم الإصدارات

- الإصدار 0.1.x: التركيز على ميزات اللغة الأساسية، المعالج المسبق، المحلل اللفظي، المحلل النحوي، AST الأساسي، والدعم العربي الأساسي.
- الإصدارات المستقبلية: التحليل الدلالي، توليد الكود، ميزات لغة متقدمة، وأدوات محسنة.
